# 响应式

## 1. 响应式与双向绑定关系

- 响应式：data 决定 ui

  ui = f(data)，一旦 data 变化，ui 会更新 

- 双向绑定：data 决定 ui，ui 改变 data

  框架根据 data 显示 ui，同时 ui 可以更改 data

## 2. Vue 的双向绑定 api

- sync api

  - 父组件做了：

    1. 数据传给子组件
    2. 监听事件A（update:input），在回调执行『更改数据操作』 **这步给 sync 做了，我们不需要做**

  - 子组件做了：

    1. 接受 props 数据
    
  2. 发送事件 A
    
  [代码](https://codesandbox.io/s/vue-template-bgifc)
    
    [使用 sync 的代码](https://codesandbox.io/s/vue-template-tksv7)

- v-modal api

  🚧

## 3.  响应式过程

- 将 data 内的数据进行 `Object.defineProperty`处理，添加 getter/ setter 函数，这两个函数用于属性被访问和修改时通知变更
- 组件实例对应一个 watch 实例，watch 会把依赖的 data 记录下来，当依赖的 data 触发 setter，会通知 watch，让 watch 对应组件 render

## 4. 添加响应式数据注意点

重点： 响应式不能添加到数据的根节点中

例子： https://codesandbox.io/s/vue-template-ergun



