# 大众点评

## 过程笔记

- 数据mock

    1. 使用 server node 包 mock 数据 `npm install server -g` 
    
    2. 这个配置的作用是什么

       ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190623143148.png)
 
    3. 借用 create-react-app，将mock数据放到public目录下。
    
- state 的理解

    1. state 数据就是 ui 数据，如果数据与 ui 无关，那么应该将这个数据挂载到 this 中。
    
        ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190623164016.png)
    
    2. 数据是否是state的判断依据？
    
        - 如果数据通过 props 传入，那么该数据不是 state
        
        - 如果数据不会随着时间，交互操作变化，那么该数据不是 state
        
        - 如果数据可以通过其他 state 或者 props 计算而来，那么该数据不是 state 
        
    3. state 包含两个含义：
    
        - 全局 state
        
        - 组件 state
                  
    4. 修改 state 的方法：借助 props，父给子传入回调
    
- Redux 的理解
    
    1. Redux 的构建过程：①明确全局 state 对象 ②创建 actions ③构建 reducer 函数 ④ 构建 store
    
        - todo app 全局 state 对象：
    
            ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190624114519.png)
      
        - actions function 的示例：
    
            ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190624111321.png)
        
        - 构建 reducer 函数，第一个参数是 state，第二个参数是 action， 输出经过 action 操作后的新的 state， 下面以 addTodo 为例
    
            ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190624120400.png)
            
        - 使用 reducer 函数构建 store
        
            ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190624122112.png)
            
    2. 优化代码：将一个 reducer 文件拆分成多个 reducer 文件，最后通过 combineReducers 合并
           
- redux 迁移到 react-redux 重点

    1. 明确展示型组件需要的 state 和 需要派发的 action
    
    2. mapStateToProps 是返回一个对象。对象的value是全局 state 的某个数据
    
    3. mapDispatchToProps 返回一个对象，对象的value是函数，该函数执行「派发action」代码
    
- 为了通过 redux 发送一个异步请求，需要做以下事情

    ①修改全局 state 对象 ②创建三个同步 actions（发起请求，请求成功，请求失败） ③创建函数，发送请求，并且dispatch相应的actions④修改 reducer ⑤引入 react-thunk 中间件
  
- redux 的高级使用方式
    
    1. redux 的 state 设计原则： 像「设计数据库一样」设计全局 state
    
        - 按照领域（Domain）,分成若干子state，子state之间不能保存重复的数据
        
        - 表中 state 以键值对的结构存储数据，以 ID 作为记录的索引。（后端返回的数据一般是数组，我们需要把数组转化为对象保存到 state 中）
        
        - state 中的字段不相互依赖，即state不能保存可以通过已有数据计算而来的数据。
        
        - 嵌套层级不要过深
        
        - 对于 ui state ，将他们放到一个 state domain 中
        
    3. selectors
    
        - selector 是什么？
        
          一个函数，参数是全局 state，返回一个局部 state 
          
        - 为什么要有 selector？
        
          在多个 container 组件的 mapStateToProps 都引用同一个局部 state，如果此时想修改局部 state 的名称
          
          ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190626182333.png)
          
          需要修改3处
          
          如果设立一个函数，用于获取局部 state， 那么只需要修改一处即可
    
    4. middleWare 的作用：增强 dispatch  的功能 ？？？？？
    
        ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190624151444.png)
        
    5. store enhancer??
    
    6. immutable.js 的作用：简化操作不可变数据的库，代替es6的扩展运算符
    
    7. Reselect.js 的作用：？？
    
- react-router4

    1. MPA 与 SPA 的路由区别
      
        - MPA：服务端路由，不同的 url 返回不同的 html，路由功能由服务端实现
        
            ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190624154154.png)
            
        - SPA：客户端路由，不同的 url 返回相同的 html，路由功能由js根据url的内容，渲染不同的内容 
        
            ![](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/image-host/master/img/20190624154325.png)
            
    2. 使用 BrowserRouter 组件，需要进行服务端的配置，为什么？，如何配置？ 
          
    3. route 组件渲染相应组件的方式
    
- app 的文件结构


     
