# Webpack 原理

## 第一课-（AST）

### 编译过程

- parse：代码 code => AST
- traverse：遍历 AST 进行修改
- generate：AST => code2

### 工具

- babel 将高级语法翻译为 ES5
- @babel/parser
- @babel/traverse
- @babel/generrator
- @babel/core 包含前三者
- @babel/preset-env内置很多规则



### 代码技巧

- 使用哈希表存数据
- 通过检测 key 避免重复



### 循环依赖

- 有的循环可以正常执行
- 有的循环不可以
- 都可以做静态分析

### ES Modules VS CommonJS

- CommonJS 模块输出的是一个值的**拷贝**，ES6 模块输出的是值的**引用**
- CommonJS模块在运行时加载，ES6 模块编译时执行
  - CommonJS 加载的是一个对象（即module.exports属性），该对象只有在脚本运行完才会生成。
  - ES6 模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成，通过 AST 进行静态分析，可以执行 Tree Shaking





## 第二课-bundle（打包）





