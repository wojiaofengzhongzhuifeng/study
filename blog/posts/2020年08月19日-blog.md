# blog系统

- typeorm 需要做的事情（按顺序）

  - 连接数据库
  - 使用 migration 创建表
  - 使用 entity 对表进行操作
    - 声明 entity 类型
    - 创建数据关联   

- 如何使用 typeorm migration 对表进行追加 column 操作

- 数据库统一风格模板表格

  studentRanks

- | id   | rank | studentName | createdAt | updateAT |
  | ---- | ---- | ----------- | --------- | -------- |
  |      |      |             |           |          |





## 操作记录

- 使用 docker 起一个postgresql 服务

  执行的操作， 

  ```
  docker run -v "$PWD/blog-data":/var/lib/postgresql/data -p 5432:5432 -e POSTGRES_USER=blog -e POSTGRES_HOST_AUTH_METHOD=trust -d b98d1e0a90de
  
  ```

- 常用 PostgreSQL 命令行

  ```
  # 以 用户名为 blog 密码为 123 的账户进入数据库
  psql -U blog -W 123
  
  # 显示所有数据库
  \l
  
  # 进入某个数据库
  \c xxxx
  
  # 显示数据库表格
  \dt
  
  # 生成数据库
  CREATE DATABASE blog_dev ENCODING 'UTF8' LC_COLLATE 'en_US.utf8' LC_CTYPE 'en_US.utf8';
  ```

- 在 next 中引入 ts，目标yarn dev 正常

  - 添加 tsconfig.json 
  - yarn dev 发现报错
  - 安装依赖，将某个文件从 jsx 换成 tsx
  - 发现 tsx 都是报错，原来是tsconfig.json 没有配置好

  

- 在 next 中导入 pg，目标是能在 next 中打印 connect 

  ```
  
  yarn add typeorm reflect-metadata pg
  
  yarn add @types/node --dev
  ```

  

