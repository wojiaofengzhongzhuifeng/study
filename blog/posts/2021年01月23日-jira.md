# jira项目观看过程笔记



### 第三章观看笔记

#### public 是静态资源文件，内部的%public% 是什么东西？



####  使用 prettier 在提交之前格式化代码

遇到一个问题：提交代码的时候，报了这个错误
![image-20210124104426976](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20210124104426976.png)

但是我检查 node 版本，确实是 14.5.0，但是我又不知道怎么将版本进行切换。



#### 使用配置解决引用层级过深问题

设置了没有解决

#### ✅使用json-server 作为 mock 工具

- 将 json-server 通过 `yarn add json-server --dev`安装

- 添加 db.json

- 然后 package.json 添加 script 

  ```diff
    "scripts": {
      "start": "react-scripts start",
      "build": "react-scripts build",
      "test": "react-scripts test",
      "eject": "react-scripts eject",
  +   "mock": "json-server --watch __mock__data__/db.json -p 3001"
    },
  ```

#### 项目列表的数据获取与展示
![image-20210123211525785](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20210123211525785.png)

<details><summary>mock 方式 1 关联关系放在项目中 </summary>
<p>
```python
{
  "handlers": [
    {
      "name": "高修文",
      "id": 1
    },
    {
      "name": "熊天成",
      "id": 2
    },
    {
      "name": "郑华",
      "id": 3
    },
    {
      "name": "王文静",
      "id": 4
    }
  ],
  "projects": [
    {
      "name": "骑手管理",
      "id": 1,
      "handlerId": 1
    },
    {
      "name": "团购 App",
      "handlerId": 2,
      "id": 2
    },
    {
      "name": "物料管理系统",
      "handlerId": 2,
      "id": 3
    },
    {
      "name": "总部管理系统",
      "handlerId": 3,
      "id": 4
    },
    {
      "name": "送餐路线规划系统",
      "handlerId": 4,
      "id": 5
    }
  ]
}
```

</p>
</details>

####react组件编写的过程是什么

- 划分组件
- 组件输入
- 组件输出（产生）数据
- 思考组件输出需要触发什么操作





#### ✅ mock 数据与环境变量的联合使用

- 在 create-react-app 中使用

- setData

  在根目录创建`.env`文件，文件内容如下
  注意变量必须以 `REACT_APP_xxx`开头

  ```
  REACT_APP_API_URL = 'http://localhost:3001'
  REACT_APP_PROD_API_URL = 'http://baidu.com'
  
  ```

- getData

  ```
  const apiUrl = process.env.REACT_APP_API_URL;
  console.log(apiUrl);
  ```







### PorjectFilter 组件

- 组件输入数据：userList
- 组件输出数据
  - 用户输入的项目名称
    - 触发「获取项目列表」接口
  - 用户选择的负责人名称
    - 触发「获取项目列表」接口



### 经验：收集 url query 数据

#### 需求

需要根据用户的操作生成如下 url

`http://localhost:3000/projects?projectName=1&handlerId=2`;

那么应该使用一个对象去保存数据，而不是使用分散的变量保存

```diff
+ let filterData = {
+	 projectName: 1,
+	 handlerId: 2,
+ }

- let projectName = 1
- let handlerId = 2
```



### 常见需求

删除一个对象为 falsey 值的 key&value，（不包含 0）