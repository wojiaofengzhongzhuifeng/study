# 浏览器缓存控制





## 名词介绍

- 缓存区域

  服务器将文件返回给浏览器，为了实现缓存，记录文件的缓存信息。

  | 文件名称 | 缓存规则                    |
  | -------- | --------------------------- |
  | a.js     | cache-control: max-age=30   |
  | a.js     | Etag: jfdkaljflkdjaskljvklv |

## 流程



![image-20200831213452903](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20200831213452903.png)



## 流程细节

- 如何判断能否走强制缓存？

  看缓存区域中， a.js 的 cache-control max-age key 的 value。如果未超时，走强制缓存，如果超时，不能走强制缓存。

- 如何判断能否走协商缓存？

  按照正常请求文件，发送请求，不过请求header 带上「缓存区域中， a.js 的 Etag/last-motify key 的 value 」,服务器进行判断，如果一致，返回 304，浏览器就可以走协商缓存。





## 测试代码

- 下载地址

- 测试一，测试 cache-control: max-age 作用

  ![image-20200831221027879](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20200831221027879.png)