## 总结

- 二次封装antd 组件
- axios + hooks 封装登录态维持、响应结果统一处理、错误处理、管理 loading、设置并发请求、取消重复请求等功能
- 优化任务审核流程

## 细节



### 后端响应错误方式

后端遇到内部错误，有两种响应方式

- 设置httpcode 为200，
- 设置httpcode 为500，一般来说都是这个

后端遇到业务错误，有两种响应方式

- 设置httpcode 为200，一般来说都是这个
- 设置httpcode 为500 



### axios + hooks 封装请求功能说明

- 创建 axios 实例，用于封装公共配置；

- 通过 axios 请求拦截器，在请求之前调用拦截器，通常用于登录状态的维持
- 通过 axios 响应拦截器，在响应之后调用拦截器，通常用于错误处理





### axios + hooks 封装请求功能说明 - 取消重复请求

- 确定数据结构

  使用map 的数据结构，数据结构为

  ```
  {
  	"请求地址+请求动作+请求参数组成的字符串": 取消请求函数
  }
  ```

- 在请求拦截器中，将 congfig 作为map 的查询参数，检查是否存在相应cancelFn
  - 如果没有，在map新增kv 
  - 如果有，执行取消请求函数

### axios + hooks 封装请求功能说明 - 设置并发请求

- 确定数据结构

  使用队列数据结构，数据结构为

  ```
  1. [[requestConfig, callback]]
  2. 最大请求数量
  3. 当前请求数量
  ```



### 优化动态歌词任务链路 - 技术不多，主要是优化流程

### 





