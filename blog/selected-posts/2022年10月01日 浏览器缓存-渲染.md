## 预习内容

### 浏览器有哪些缓存？分别什么作用？如何进行控制？

- 缓存通过 http 响应头进行控制

- 这些响应头分别是：

  - 强缓存

    - Expires： 2023-10-01 过期，注意使用的是客户端的时间

    - Cache-Control：一小时后过期

  - 协商缓存

    - Last-Modified：资源在服务器最后修改时间

    - ETag： 文件内容 MD5


其中 Expires 与 Cache-Control 属于强缓存；Last-Modified 与 ETag 属于协商缓存

浏览器使用缓存的优先级是先使用强缓存，如果强缓存过期了，使用协商缓存，如果状态码返回 304，那么说明可以继续使用原资源

---

### 输入URL到浏览器显示页面过程

我的理解，凡是涉及过程的，需要提前想好目的是什么，至于过程，可以按照模板：准备过程、执行过程、收尾过程三个过程

「输入URL」的目的是什么？用一句话概括是：从用户浏览器，获取 + 展示服务器的数据

过程：

- 准备过程
  - DNS 域名解析
  - 建立 TCP 连接
  - 发送 HTTP 请求；获取响应结果
- 执行过程
  - 解析 HTML ，生成 DOM 

---

## 直播内容



### 输入 URL 到浏览器显示页面过程

- 输入URL（ URL 除了是 HTML ，也可以是 JS 和 CSS）
  - 内容缓存（强缓存）阶段
- DNS解析（会做DNS缓存检测），也叫域名解析
- TCP连接
  - 三次握手
- 发送HTTP请求
  - 内容缓存（协商缓存）阶段
- 服务器处理请求并返回HTTP报文
- 浏览器解析渲染页面（渲染进程）

- 连接结束

---

### HTTP 建立在 TCP，TCP 需要三次握手

---

### TCP 需要三次的原因

|          | 客户端     | 服务端     |
| -------- | ---------- | ---------- |
| 发送能力 | 第一次作用 | 第二次作用 |
| 接受能力 | 第三次作用 | 第一次作用 |

---

### 🔴 TCP 需要四次的原因

---

### 浏览器渲染流程

![image-20221011190826762](/Users/raojj/Desktop/myWorks/image-host/image-20221011190826762.png)



---

### **注：display: none的元素，会存在于DOM树，但是将不会存在于渲染树。visibility在两者都会存在。**

- chrome 审查元素 === DOM 树；

- 页面实际渲染 === 渲染树；

  ![image-20221011190443428](/Users/raojj/Desktop/myWorks/image-host/image-20221011190443428.png)

  ![image-20221011190528728](/Users/raojj/Desktop/myWorks/image-host/image-20221011190528728.png)

---

### 

---

### 重绘（repaint）、重排（reflow）

- repaint（重绘）：只要元素样式属性（除形状、大小）发生改变了，就会触发repaint。

- reflow（重排或回流）：只要增删DOM节点或修改元素的形状、大小，就会触发reflow。
- **注：重绘不一定导致重排，但重排一定会导致重绘**

---

### **websocket建立时需要发送一个http请求来建立连接并升级为websocket协议**

---

### 浏览器如何解析 html ?

- 解析HTML === 将数据转化为 DOM + CSSOM

- 当遇到没有标注 async or defer 属性的 script 标签，会停止 HTML 的解析，直到 script 下载并且执行
- 遇到图片、css 文件，HTML 解析可以正常进行，不会阻塞

---





## 题目

1、用自己的语言简单描述一下浏览器的资源缓存逻辑或过程

2、浏览器输入URL到浏览器显示页面的这个过程，强缓存和协商缓存分别在哪个阶段？

3、简述http请求前的3次握手以及作用

4、浏览器dom渲染流程？一般可以从哪些方面进行渲染优化？

5、http有状态吗？http1和http2了解多少？
