# 闭包



## 最简单的闭包例子

声明一个变量，声明一个函数

```javascript
var test = "test";
function test1(){
	console.log(test);
}
```

将代码放到一个函数中，在这个函数中将函数 test1 返回

```javascript
function x(){
  var test = "test";
  return function test1(){
  	console.log(test);
  }
}

// 执行 test1 函数
x()();
```

**test 变量 + test1 函数 === 闭包**

## 闭包作用

**暴露一个访问器test1（函数），让别人通过访问器「间接访问」重要变量test。**

函数 x 只是为了①构建出一个局部作用域，②并且让别人能使用访问器函数，与闭包无关。





## 如何构建一个立即执行函数

①声明匿名函数②执行③使用符号通过语法检查

```
!function(){console.log(1)}()
```



## 立即执行函数有什么用

- **创造一个局部作用域**

  之前：https://jsbin.com/jahiyomihi/1/edit?html,js,console,output

  之后：https://jsbin.com/hopefovowi/1/edit?html,js,console,output

- **内部的变量不被外部代码读取，内部代码能读取外部变量**

  ```javascript
  var name = 'name';
  (function() {
    console.log("name", name); // 打印 "name", name
    var a = 1
  })();
  console.("a", a) // 报错 a 未定义
  ```


