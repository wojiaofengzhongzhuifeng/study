## 2020.02.25

### 定义数组内部类型

- 需求

  假设我定义一个 array,内部类型分别为 string,number,string 如何定义？

- 解决方法

  变量后添加 as const

  未添加

  ![image-20210225105313589](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20210225105313589.png)

  添加 as const 

  ![image-20210225105353425](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20210225105353425.png)

##2020.02.24

### 环境变量注入不同配置文件

- create-react-app + dotenv 出现问题

  需要在 `.env` 中添加如下的 preload

  ```diff
  - TEST=123321
  + REACT_APP_TEST=333333
  ```

### react hooks 闭包陷阱

- react hooks

  - [例子](https://codesandbox.io/s/interesting-swanson-pks22)

  - 原因

    - 页面加载完毕后，会为 Test 组件生成第一个快照，此时 count = 0

    - 点击 + 号后，会为 Test 组件生成第二个快照，此时 count = 1 

    - 离开 Test 组件后，会执行第一个快照的useEffect 的回调函数，在这个回调函数中获取 count，此时 count = 0

- [原生 js 例子1](https://jsbin.com/sewadozadi/1/edit)

- [原生 js 例子2](https://jsbin.com/tavatumima/1/edit?js,console,output)



## react useUrlQueryParam 实现（自制）

- 需求

  在 url 与 组件两个地方，可以互相设置值，比如 url 添加 ?a=1&b=2，那么通过 useUrlQueryParam 可以生成对象`{a: 1,b: 2}`.

  - url 设置 queryParamsObj

    页面加载后，通过 api 获取 queryParam 的值，然后将这个值作为返回值返回即可

  - setQueryParamsObj

    通过 `setQueryParamsObj({a: 1})`, 通过api, 设置 url 的值


## 遍历 iterator

```javascript
for(let pair of iterator ){
	let [key,value] = pair
}
```











## 2020.02.22

### 使用二分查找法确定 bug

- 如果发现最终定位的 commit 是 **merge commit**，那么需要分别进入merge commit进行定位
  ![image-20210222105900148](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20210222105900148.png)



### webpack 报错

![image-20210222171022116](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20210222171022116.png)

出现这个错误，并不是需要`yarn add webpack-cli/bin/config-yargs D `而是因为命令错误

```diff
{
  "name": "webpack-demo",
  "version": "1.0.0",
  "description": "",
  "main": "src/index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "build": "webpack",
-    "dev": "webpack-dev-server"
+    "dev": "webpack server"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "html-webpack-plugin": "^5.2.0",
    "webpack": "^5.23.0",
    "webpack-cli": "^4.5.0",
    "webpack-dev-server": "^3.11.2"
  }
}

```



## 2020.02.21

### react 组件复用

- 场景

  某个地方 1 渲染评论数据，某个地方 2 渲染 blog 数据

- HOC

  要理解 HOC 需要先理解柯里化

  https://segmentfault.com/a/1190000018180159

  https://codesandbox.io/s/runtime-morning-gyoxg

  https://codesandbox.io/s/elastic-grass-eb93o

  https://juejin.cn/post/6844904050236850184#heading-1

- render props

- hooks



### 怎么写交接文档

如何生成 pdf 折叠篮不要了，放在常见问题内，目前需要手动执行 jenkins 的脚本，看下能不能正常

  





## 2020.02.14



## 2020.02.10

### 准备工作

- 硬盘休眠关闭
- mac 开机密码



## 2020.02.07

### 封装 useAsync

## 2020.02.06

### 函数

[链接](../posts/2021年02月06日-function.md)



## 2020.02.05

### ❌jquery无法深拷贝

？？？

### ✅函数注入泛型

```typescript
const log = <T>(a: T): T=>{
  return a
} 
function log1<T>(a: T): T{
  return a
}
```



### ✅useAsync

[链接](../posts/2021年01月23日-jira.md#useAsync作用)

### ✅promise

[测试 1 then 第二个参数与 catch 等效](https://jsbin.com/fizofihibi/1/edit?js,console,output)

[测试 2](https://jsbin.com/zapiziwera/1/edit)













## 2020.02.04

### ✅解决需求要有入口

写 hooks 的时候先假设如何调用这个 hooks

### ✅学东西要分类别，不同类别的知识学习方式都不一样

- 学习一个新框架，新技术（术）
  - 面临什么问题
  - 这个新技术怎么解决的
  - 这个东西是什么
  - 如何使用

## 2020.02.03

### ✅第三方登录出现了 bug 的原因以及解决方法

- 原因

  ```diff
  let res = {
    code: "SUCCESS",
    message: "成功",
  -	data: {
  -		login: {...}
  -	}
  +	data: {
  +		login: {...}
  +   wxEOpenID: "",
  +   qqUnionID: "",
  +	}
  }
  ```

  我取数据的时候， 直接这样取的，后端为 res.data 注入其他数据，导致报错

  ```javascript
  Object.keys(res.data)[0] 
  ```

  建议与这个[一起](https://github.com/wojiaofengzhongzhuifeng/study/blob/master/blog/posts/2020%E5%B9%B407%E6%9C%8825%E6%97%A5-%E6%B4%BB%E5%8A%A8%E6%80%BB%E7%BB%93.md#%E6%88%91%E8%B8%A9%E4%BA%86%E4%BB%80%E4%B9%88%E5%9D%91)总结

- 总结

  **使用对象 or 数组，要假定内部的内容是变化的**

  **如果数据是一个对象，要假定对象 key 的数量是不定的** [链接](https://jsbin.com/pitikiziho/2/edit?js,console,output)

  **如果数据是一个数组， 要假定内部的顺序是变化的** [链接](https://jsbin.com/karucinado/1/edit)

### ✅useAuth 

[链接](../posts/2021年01月23日-jira.md#useAuth)





## 2020.02.02

<p>
<details>
<summary>✅ git 折叠 语法</summary>


<p>
</p>

## 标题1

- 水果

- 吃法

- 学习

**test**

~~tset11~~


如果 PDF 未成功生成, 需要在本地使用命令生成 PDF, 然后将本地生成的 PDF 放到服务器编译之后的代码的文件夹

> PDF 文件名称是确定的 test 

```shell
$ gitbook pdf ./ './_book/业务数据服务 API.pdf'1
$ gitbook pdf ./ './_book/业务数据服务 API.pdf'2
```

[链接](https://www.google.com)

![图片](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20200725151755080.png)

</details>
</p>






## 2020.02.01

### ✅ 完成功能函数-某个数据初始化为 null，经过 x 秒后才设置值，如何保证使用该数据的时候已经设置好值了？

局限性太大

```javascript
  function listenDataChange(data, key, fn, delay) {
    let timeId = null;
    if (!data[key]) {
      timeId = setInterval(() => {
        console.log('xxxxx')

        if (data[key]) {
          clearInterval(timeId);
          fn(data)
        }
      }, delay)
    }

  }


  let data = {};
  setTimeout(()=>{
    data.test1 = 1111
  }, 5000)
	// 参数 1：被监听变量只能是对象
	// 参数 2：需要监听的对象 key
	// 参数 3：数据改变的回调函数
	// 参数 4：查看数据变更间隔时间
  listenDataChange(data, 'test1',(newData)=>{
    console.log(newData)
  }, 1000)
```



