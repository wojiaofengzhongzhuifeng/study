## 2020.02.03

### 第三方登录出现了 bug 的原因以及解决方法

- 原因

  ```diff
  {
  	code: "SUCCESS",
  	message: "成功",
  -	data: {
  -		login: {...}
  -	}
  +	data: {
  +		login: {...}
  +   wxEOpenID: "",
  +   qqUnionID: "",
  +	}
  }
  ```

  我取数据的时候， 直接这样取的， 第二版代码直接报错

  ```javascript
  Object.keys(data)[0] 
  ```

  建议与这个[一起](https://github.com/wojiaofengzhongzhuifeng/study/blob/master/blog/posts/2020%E5%B9%B407%E6%9C%8825%E6%97%A5-%E6%B4%BB%E5%8A%A8%E6%80%BB%E7%BB%93.md#%E6%88%91%E8%B8%A9%E4%BA%86%E4%BB%80%E4%B9%88%E5%9D%91)总结

- 总结

  **获取对象 or 数组，要假定内部的内容是变化的**

  **如果数据是一个对象，要假定对象 key 的数量是不定的** [链接](https://jsbin.com/pitikiziho/2/edit?js,console,output)

  **如果数据是一个数组， 要假定内部的顺序是变化的** [链接](https://jsbin.com/karucinado/1/edit)

### useAuth 

[链接](../posts/2021年01月23日-jira.md#useAuth)





## 2020.02.02

### 解决 gitbook install 报错的问题

[参考资料](https://stackoverflow.com/questions/64211386/gitbook-cli-install-error-typeerror-cb-apply-is-not-a-function-inside-graceful)

这里的意思是：

- 需要找到 gitbook-cli 安装目录
- 手动安装某个库到某个版本

![image-20210202104704886](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20210202104704886.png)


<p>
<details>
<summary>git 折叠</summary>

<p>
</p>

## 标题1

- 水果

- 吃法

- 学习

**test**

~~tset11~~


如果 PDF 未成功生成, 需要在本地使用命令生成 PDF, 然后将本地生成的 PDF 放到服务器编译之后的代码的文件夹

> PDF 文件名称是确定的 test 

```shell
$ gitbook pdf ./ './_book/业务数据服务 API.pdf'1
$ gitbook pdf ./ './_book/业务数据服务 API.pdf'2
```

[链接](https://www.google.com)

![图片](https://raw.githubusercontent.com/wojiaofengzhongzhuifeng/iamge-host-2/master/image-20200725151755080.png)

</details>
</p>






## 2020.02.01

### 完成 api 文档说明 md

- 如何使用
- 环境配置
- 给别人用看下

### 完成功能函数-某个数据初始化为 null，经过 x 秒后才设置值，如何保证使用该数据的时候已经设置好值了？

局限性太大

```javascript
  function test(data, key, fn, delay) {
    let timeId = null;
    if (!data[key]) {
      timeId = setInterval(() => {
        console.log('xxxxx')

        if (data[key]) {
          clearInterval(timeId);
          fn(data)
        }
      }, delay)
    }

  }


  let data = {};
  setTimeout(()=>{
    data.test1 = 1111
  }, 5000)
  test(data, 'test1',(newData)=>{
    console.log(newData)
  }, 1000)
```



### bug修复



